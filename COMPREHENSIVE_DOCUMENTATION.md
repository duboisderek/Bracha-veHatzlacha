# COMPREHENSIVE USER & ADMIN DOCUMENTATION
## BrachaVeHatzlacha Lottery Platform - Complete Guide

### 📚 TABLE OF CONTENTS

1. [Platform Overview](#platform-overview)
2. [User Guide](#user-guide)
3. [Admin Guide](#admin-guide)
4. [Technical Documentation](#technical-documentation)
5. [API Documentation](#api-documentation)
6. [Troubleshooting](#troubleshooting)
7. [Security Guidelines](#security-guidelines)
8. [Compliance Information](#compliance-information)

---

## PLATFORM OVERVIEW

### About BrachaVeHatzlacha
BrachaVeHatzlacha is a premium multilingual lottery platform supporting Hebrew (RTL), English, and French languages. The platform offers secure lottery participation with crypto payments, real-time chat support, and comprehensive administrative tools.

### Key Features:
- **Multilingual Support**: Hebrew (RTL), English, French
- **Secure Payments**: Crypto wallets (BTC, ETH, LTC) + traditional methods
- **Real-time Chat**: Multi-language customer support
- **Mobile Optimized**: Responsive design for all devices
- **Admin Dashboard**: Complete CRM and lottery management
- **Security**: 2FA, SSL, session protection

---

## USER GUIDE

### 🚀 Getting Started

#### Account Registration:
1. **Visit the Platform**: Navigate to the BrachaVeHatzlacha homepage
2. **Select Language**: Choose Hebrew, English, or French
3. **Create Account**: Click "Register" and provide:
   - Email address
   - Strong password (8+ characters)
   - Confirm password
4. **Welcome Bonus**: Receive 100₪ signup bonus automatically
5. **Verify Account**: Complete any required verification steps

#### First Login:
1. **Access Platform**: Use your email and password
2. **Dashboard Tour**: Familiarize yourself with the interface
3. **Balance Check**: View your 100₪ welcome bonus
4. **Profile Setup**: Complete your profile information

### 🎲 Playing the Lottery

#### How to Purchase Tickets:
1. **Navigate to Dashboard**: Access your personal area
2. **Select Numbers**: Choose 6 numbers from 1-37
   - Use "Quick Pick" for random selection
   - Manual selection by clicking numbers
3. **Confirm Selection**: Review your chosen numbers
4. **Purchase Ticket**: Pay 20₪ per ticket
5. **Confirmation**: Receive ticket confirmation immediately

#### Understanding Draws:
- **Schedule**: Weekly draws every Friday at 20:00
- **Participation Window**: Closes 60 seconds before draw
- **Winning Numbers**: 6 numbers drawn from 1-37
- **Prize Structure**: Based on matching numbers
  - 6 matches: Jackpot winner
  - 5 matches: Major prize
  - 4 matches: Medium prize
  - 3 matches: Small prize

### 💰 Managing Your Account

#### Adding Funds:
1. **Crypto Payments** (Primary Method):
   - Select cryptocurrency (BTC, ETH, LTC)
   - Enter deposit amount
   - Scan QR code or copy wallet address
   - Send payment from your wallet
   - Wait for admin confirmation (usually <24 hours)

2. **Manual Deposits**:
   - Contact admin for manual balance addition
   - Provide transaction reference
   - Verification required

#### Viewing Transaction History:
- **Access**: Dashboard → "My Transactions"
- **Filter Options**: By date, type, amount
- **Details**: View complete transaction information
- **Export**: Download transaction history

#### Checking Lottery History:
- **Past Tickets**: View all purchased tickets
- **Results**: Check winning numbers vs. your numbers
- **Winnings**: See prize amounts won
- **Statistics**: Track your lottery participation

### 🌐 Language & Settings

#### Changing Language:
1. **Language Selector**: Top-right corner of any page
2. **Available Options**: Hebrew (עברית), English, Français
3. **Instant Switch**: Language changes immediately
4. **Preference Saved**: Selection remembered for future visits

#### Profile Settings:
- **Personal Information**: Update name, contact details
- **Language Preference**: Set default language
- **Notification Settings**: Configure alerts and emails
- **Security Settings**: Change password, enable 2FA

### 📱 Mobile Experience

#### Mobile Access:
- **Responsive Design**: Works on all mobile devices
- **Touch Interface**: Optimized for touch interaction
- **Performance**: Fast loading on mobile networks
- **Features**: Full functionality available on mobile

#### WhatsApp Integration:
- **Quick Support**: Direct WhatsApp contact
- **Notifications**: Optional WhatsApp alerts
- **Language Support**: Support in your preferred language

---

## ADMIN GUIDE

### 🔐 Admin Access

#### Logging In:
1. **Admin Portal**: Use admin login page
2. **Credentials**: Admin-level email and password
3. **Two-Factor**: Complete 2FA if enabled
4. **Dashboard**: Access admin control panel

#### Security Best Practices:
- **Strong Passwords**: Use complex, unique passwords
- **Regular Updates**: Change passwords periodically
- **Secure Networks**: Use trusted networks only
- **Session Timeout**: Log out when finished
- **Access Monitoring**: Monitor login attempts

### 👥 User Management

#### Creating New Users:
1. **Navigation**: Admin Dashboard → User Management
2. **Add User**: Click "Create New User"
3. **Information Required**:
   - Email address
   - Initial password
   - User role (New, Standard, VIP)
   - Initial balance (optional)
4. **Welcome Process**: User receives welcome email

#### Managing Existing Users:
- **Search Users**: Find by email, name, or ID
- **View Profiles**: Access complete user information
- **Edit Details**: Update user information
- **Balance Management**: Add/subtract user balances
- **Status Changes**: Modify user status or role
- **Block Users**: Temporarily or permanently block accounts

#### User Roles & Permissions:
- **New Clients**: Basic lottery participation
- **Standard Clients**: Full platform access
- **VIP Clients**: Priority support, special features
- **Admin**: User management and lottery control
- **Root Admin**: Full system access and settings

### 🎰 Lottery Management

#### Creating New Draws:
1. **Navigate**: Admin Dashboard → Draw Management
2. **Create Draw**: Click "Create New Draw"
3. **Set Parameters**:
   - Draw date and time
   - Jackpot amount
   - Entry deadline
4. **Activation**: Make draw available for participation

#### Managing Active Draws:
- **Monitor Participation**: View ticket sales in real-time
- **Participant Lists**: See all participants and their numbers
- **Sales Statistics**: Track revenue and participation rates
- **Draw Control**: Start, pause, or modify draws

#### Executing Draws:
1. **Manual Draw**: Generate winning numbers manually
2. **Number Selection**: Choose 6 winning numbers (1-37)
3. **Result Processing**: System calculates winners automatically
4. **Prize Distribution**: Winnings added to user accounts automatically
5. **Notification**: Winners notified immediately

#### Draw Results Management:
- **Verify Results**: Confirm winning numbers are correct
- **Winner Verification**: Review all prize recipients
- **Prize Distribution**: Confirm prize payments
- **Result Publication**: Make results public
- **Archive Draw**: Move completed draw to history

### 💳 Financial Management

#### Crypto Payment Administration:
1. **Payment Monitoring**: View all crypto deposits
2. **Verification Process**:
   - Check blockchain confirmation
   - Verify transaction amount
   - Confirm wallet address
3. **Approval**: Approve legitimate deposits
4. **Balance Update**: Add confirmed amounts to user accounts
5. **Record Keeping**: Maintain transaction records

#### Manual Deposits:
- **Admin Deposits**: Add funds to user accounts manually
- **Verification Required**: Document reason for deposit
- **Audit Trail**: All manual deposits logged
- **User Notification**: Users notified of balance changes

#### Financial Reporting:
- **Revenue Reports**: Track platform income
- **User Balances**: Monitor total user funds
- **Transaction Analysis**: Analyze payment patterns
- **Profit Calculations**: Platform retention and profits
- **Export Data**: Generate financial reports for accounting

### 📊 Analytics & Reporting

#### User Analytics:
- **Registration Trends**: New user acquisition rates
- **Activity Patterns**: User engagement metrics
- **Retention Rates**: User return and participation rates
- **Geographic Data**: User location analysis (if available)

#### Lottery Analytics:
- **Participation Rates**: Tickets sold per draw
- **Popular Numbers**: Most frequently chosen numbers
- **Jackpot Trends**: Prize pool growth patterns
- **Winner Statistics**: Winning pattern analysis

#### Financial Analytics:
- **Revenue Tracking**: Platform income analysis
- **Payment Method Preferences**: Crypto vs traditional payments
- **User Spending Patterns**: Average user expenditure
- **Profitability Analysis**: Platform financial performance

### 🛠️ System Administration

#### Platform Settings:
- **Lottery Configuration**: Number ranges, ticket prices
- **Payment Settings**: Crypto wallet addresses, fees
- **Security Settings**: Session timeouts, login attempts
- **Email Configuration**: SMTP settings, templates
- **Language Settings**: Translation management

#### User Communication:
- **Email Templates**: Manage automated emails
- **Notification System**: Configure user alerts
- **Support Messages**: Send platform-wide announcements
- **Language Support**: Manage multilingual communications

#### Security Management:
- **User Sessions**: Monitor active sessions
- **Login Attempts**: Review failed login attempts
- **Security Events**: Monitor suspicious activities
- **Access Control**: Manage admin permissions
- **Audit Logs**: Review system access history

---

## TECHNICAL DOCUMENTATION

### 🏗️ System Architecture

#### Frontend Technology:
- **Framework**: React 18 with TypeScript
- **Styling**: Tailwind CSS with Shadcn/ui components
- **Build Tool**: Vite for optimized builds
- **State Management**: TanStack Query + React Context
- **Internationalization**: Custom i18n system with RTL support

#### Backend Technology:
- **Runtime**: Node.js with Express.js
- **Database**: PostgreSQL with Drizzle ORM
- **Authentication**: Session-based with bcrypt
- **Caching**: Redis-compatible with fallback
- **Security**: Helmet, rate limiting, CORS protection

#### Infrastructure:
- **Hosting**: Replit platform
- **Database**: Neon PostgreSQL cloud
- **SSL/HTTPS**: Production-ready certificates
- **Monitoring**: Built-in logging and analytics
- **Backup**: Automated daily backups

### 🔧 Development Setup

#### Prerequisites:
- Node.js 18+ 
- PostgreSQL 14+
- Redis (optional)
- Git

#### Installation:
```bash
# Clone repository
git clone https://github.com/your-org/bracha-vehatzlacha.git
cd bracha-vehatzlacha

# Install dependencies
npm install

# Set up environment variables
cp .env.example .env
# Edit .env with your configuration

# Run database migrations
npm run db:push

# Start development server
npm run dev
```

#### Environment Variables:
```bash
# Database
DATABASE_URL=postgresql://user:pass@localhost:5432/lottery

# Session
SESSION_SECRET=your-secret-key-here

# Email (optional)
SMTP_HOST=smtp.gmail.com
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Redis (optional)
REDIS_URL=redis://localhost:6379
```

### 🗄️ Database Schema

#### Core Tables:
- **users**: User accounts and authentication
- **tickets**: Lottery ticket purchases
- **draws**: Lottery draw information
- **transactions**: Financial transaction records
- **sessions**: User session management

#### Key Relationships:
- Users → Tickets (one-to-many)
- Draws → Tickets (one-to-many)
- Users → Transactions (one-to-many)

---

## API DOCUMENTATION

### 🔑 Authentication Endpoints

#### POST /api/auth/login
**Purpose**: User authentication
**Body**:
```json
{
  "email": "user@example.com",
  "password": "userpassword"
}
```
**Response**:
```json
{
  "success": true,
  "user": {
    "id": 1,
    "email": "user@example.com",
    "role": "client"
  }
}
```

#### POST /api/auth/logout
**Purpose**: User logout
**Response**:
```json
{
  "success": true,
  "message": "Logged out successfully"
}
```

#### GET /api/auth/user
**Purpose**: Get current user info
**Response**:
```json
{
  "id": 1,
  "email": "user@example.com",
  "role": "client",
  "balance": 1500,
  "status": "active"
}
```

### 🎫 Lottery Endpoints

#### GET /api/draws/current
**Purpose**: Get current active draw
**Response**:
```json
{
  "id": 15,
  "jackpot": 136447.50,
  "drawDate": "2025-07-18T20:00:00Z",
  "status": "active",
  "entriesClose": "2025-07-18T19:59:00Z"
}
```

#### POST /api/tickets/purchase
**Purpose**: Purchase lottery ticket
**Body**:
```json
{
  "drawId": 15,
  "numbers": [7, 14, 21, 28, 35, 37]
}
```
**Response**:
```json
{
  "success": true,
  "ticket": {
    "id": 1234,
    "numbers": [7, 14, 21, 28, 35, 37],
    "cost": 20,
    "drawId": 15
  },
  "newBalance": 1480
}
```

### 💰 Financial Endpoints

#### GET /api/user/transactions
**Purpose**: Get user transaction history
**Response**:
```json
{
  "transactions": [
    {
      "id": 456,
      "type": "ticket_purchase",
      "amount": -20,
      "date": "2025-07-15T14:30:00Z",
      "description": "Lottery ticket purchase"
    }
  ]
}
```

#### POST /api/crypto/submit
**Purpose**: Submit crypto payment
**Body**:
```json
{
  "currency": "BTC",
  "amount": 100,
  "txHash": "abc123...",
  "comment": "Optional comment"
}
```

### 👨‍💼 Admin Endpoints

#### GET /api/admin/users
**Purpose**: Get all users (admin only)
**Response**:
```json
{
  "users": [
    {
      "id": 1,
      "email": "user@example.com",
      "balance": 1500,
      "status": "active",
      "role": "client"
    }
  ]
}
```

#### POST /api/admin/users/:id/deposit
**Purpose**: Add funds to user account (admin only)
**Body**:
```json
{
  "amount": 100,
  "comment": "Manual deposit"
}
```

---

## TROUBLESHOOTING

### 🔧 Common Issues

#### Login Problems:
**Issue**: Cannot log in
**Solutions**:
1. Verify email and password are correct
2. Check if account is active/not blocked
3. Clear browser cookies and cache
4. Try different browser or incognito mode
5. Contact admin if persistent

#### Payment Issues:
**Issue**: Crypto payment not confirmed
**Solutions**:
1. Wait 24 hours for admin confirmation
2. Verify transaction was sent to correct address
3. Check blockchain confirmation status
4. Contact support with transaction hash
5. Provide screenshot of transaction

#### Language Display Issues:
**Issue**: Text not displaying correctly
**Solutions**:
1. Refresh page and try language switch again
2. Clear browser cache
3. Ensure browser supports RTL for Hebrew
4. Check internet connection
5. Try different browser

#### Mobile Performance:
**Issue**: Slow loading on mobile
**Solutions**:
1. Check internet connection speed
2. Close other apps to free memory
3. Clear browser cache
4. Use WiFi instead of mobile data
5. Update browser to latest version

### 🆘 Emergency Procedures

#### Account Locked:
1. Contact admin immediately
2. Provide account email address
3. Explain circumstances of lockout
4. Admin will investigate and resolve

#### Payment Disputes:
1. Gather all transaction evidence
2. Contact support with details
3. Admin will investigate blockchain records
4. Resolution within 48 hours

#### Technical Emergencies:
1. Document the issue with screenshots
2. Note exact error messages
3. Contact technical support
4. Provide browser and device information

---

## SECURITY GUIDELINES

### 🛡️ User Security

#### Account Protection:
- **Strong Passwords**: Use 12+ character passwords with mixed case, numbers, symbols
- **Unique Passwords**: Don't reuse passwords from other sites
- **Regular Updates**: Change passwords every 90 days
- **Two-Factor Authentication**: Enable 2FA when available
- **Secure Networks**: Only access from trusted networks

#### Safe Practices:
- **Log Out**: Always log out when finished
- **Private Browsing**: Use incognito mode on shared computers
- **Phishing Awareness**: Verify URLs before entering credentials
- **Software Updates**: Keep browser and OS updated
- **Antivirus**: Use updated antivirus software

#### Crypto Security:
- **Wallet Security**: Use secure cryptocurrency wallets
- **Address Verification**: Double-check wallet addresses
- **Transaction Verification**: Confirm amounts before sending
- **Private Keys**: Never share private keys or seed phrases
- **Trusted Networks**: Only make payments from secure networks

### 🔐 Admin Security

#### Enhanced Protection:
- **VPN Usage**: Always use VPN for admin access
- **Dedicated Devices**: Use dedicated devices for admin work
- **Regular Audits**: Review access logs regularly
- **Principle of Least Privilege**: Grant minimum necessary permissions
- **Incident Response**: Have procedures for security incidents

#### Monitoring:
- **Failed Logins**: Monitor for unusual login patterns
- **User Activity**: Watch for suspicious user behavior
- **Transaction Patterns**: Flag unusual financial activity
- **System Logs**: Regular review of system logs
- **Security Alerts**: Respond promptly to security notifications

---

## COMPLIANCE INFORMATION

### 📋 Legal Compliance

#### Data Protection:
- **GDPR Compliance**: European data protection standards
- **Privacy Policy**: Clear data usage policies
- **User Consent**: Explicit consent for data processing
- **Data Retention**: Limited data retention periods
- **Right to Deletion**: Users can request data deletion

#### Financial Regulations:
- **KYC Procedures**: Know Your Customer verification
- **AML Compliance**: Anti-Money Laundering checks
- **Transaction Recording**: Complete audit trails
- **Reporting Requirements**: Regulatory reporting capabilities
- **Jurisdiction Compliance**: Local law adherence

#### Lottery Regulations:
- **Licensing**: Appropriate lottery operation licenses
- **Fair Play**: Transparent and fair lottery operations
- **Age Verification**: 18+ age verification
- **Responsible Gaming**: Problem gambling resources
- **Payout Guarantees**: Assured prize payments

### 🌍 International Considerations

#### Multi-Jurisdiction Operation:
- **Local Laws**: Compliance with local lottery laws
- **Tax Obligations**: Understanding tax implications
- **Currency Regulations**: International payment compliance
- **Language Requirements**: Legal text translations
- **Dispute Resolution**: International dispute procedures

#### Crypto Compliance:
- **Cryptocurrency Regulations**: Local crypto law compliance
- **Exchange Reporting**: Crypto exchange requirements
- **Tax Reporting**: Crypto transaction tax implications
- **Wallet Compliance**: Regulatory compliant wallet usage
- **Anti-Fraud**: Crypto fraud prevention measures

---

## APPENDICES

### 📞 Contact Information

#### Technical Support:
- **Email**: support@brachavehatzlacha.com
- **WhatsApp**: [Number to be configured]
- **Hours**: 24/7 multilingual support
- **Languages**: Hebrew, English, French

#### Business Inquiries:
- **Email**: business@brachavehatzlacha.com
- **Response Time**: 24-48 hours
- **Languages**: Hebrew, English, French

#### Emergency Contact:
- **Critical Issues**: emergency@brachavehatzlacha.com
- **Response Time**: 2-4 hours
- **Escalation**: Automatic escalation procedures

### 📚 Additional Resources

#### User Education:
- **Video Tutorials**: Step-by-step guides
- **FAQ Section**: Common questions and answers
- **Community Forum**: User discussion and support
- **Newsletter**: Platform updates and tips
- **Blog**: Lottery news and strategies

#### Developer Resources:
- **API Documentation**: Complete API reference
- **SDK Downloads**: Integration tools
- **Webhook Documentation**: Event notification setup
- **Testing Environment**: Sandbox for development
- **Code Examples**: Implementation samples

---

*This documentation is updated regularly. Last updated: July 15, 2025*
*Version: 2.0.0*
*For the latest version, visit: [Documentation Portal]*